[package]
name = "whis-core"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
description = "Core library for whis voice-to-text functionality"

[dependencies]
anyhow.workspace = true
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
reqwest = { workspace = true, features = ["blocking", "multipart", "json"] }
cpal.workspace = true
hound = { workspace = true, optional = true }
arboard = { workspace = true, optional = true }
dotenvy.workspace = true
dirs = "5"
async-trait = "0.1"

# Embedded MP3 encoder for mobile (no FFmpeg dependency)
mp3lame-encoder = { version = "0.2", optional = true }

[features]
default = ["ffmpeg", "clipboard"]
# Desktop: use FFmpeg process for audio encoding and arboard for clipboard
ffmpeg = ["hound"]
clipboard = ["arboard"]
# Mobile: use embedded mp3lame encoder (no external process needed)
embedded-encoder = ["mp3lame-encoder"]
